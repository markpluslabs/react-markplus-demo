{"mappings":"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","sources":["<anon>","node_modules/mermaid/dist/chunks/mermaid.esm/pieDiagram-R7PND6GI.mjs","node_modules/mermaid/dist/chunks/mermaid.esm/chunk-K2ZEYYM2.mjs"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"bsfKY\", function(module, exports) {\n\n$parcel$export(module.exports, \"diagram\", () => $82eddb7c08573d49$export$6118d022d940d562);\n\nvar $eIvOz = parcelRequire(\"eIvOz\");\n\nvar $9nJgw = parcelRequire(\"9nJgw\");\nparcelRequire(\"2P6uP\");\nparcelRequire(\"58fUp\");\nparcelRequire(\"6JCZZ\");\n\nvar $78zRz = parcelRequire(\"78zRz\");\n\nvar $fo0kP = parcelRequire(\"fo0kP\");\nparcelRequire(\"1OUid\");\n\nvar $7hgA6 = parcelRequire(\"7hgA6\");\nparcelRequire(\"5aabO\");\nparcelRequire(\"bqRip\");\nparcelRequire(\"bYG2S\");\nparcelRequire(\"76RTQ\");\nparcelRequire(\"f34bP\");\nparcelRequire(\"2266r\");\n\nvar $7xxrv = parcelRequire(\"7xxrv\");\n// src/diagrams/pie/pieDb.ts\nvar $82eddb7c08573d49$var$DEFAULT_PIE_CONFIG = (0, $7hgA6.defaultConfig_default).pie;\nvar $82eddb7c08573d49$var$DEFAULT_PIE_DB = {\n    sections: /* @__PURE__ */ new Map(),\n    showData: false,\n    config: $82eddb7c08573d49$var$DEFAULT_PIE_CONFIG\n};\nvar $82eddb7c08573d49$var$sections = $82eddb7c08573d49$var$DEFAULT_PIE_DB.sections;\nvar $82eddb7c08573d49$var$showData = $82eddb7c08573d49$var$DEFAULT_PIE_DB.showData;\nvar $82eddb7c08573d49$var$config = structuredClone($82eddb7c08573d49$var$DEFAULT_PIE_CONFIG);\nvar $82eddb7c08573d49$var$getConfig2 = /* @__PURE__ */ (0, $7xxrv.__name)(()=>structuredClone($82eddb7c08573d49$var$config), \"getConfig\");\nvar $82eddb7c08573d49$var$clear2 = /* @__PURE__ */ (0, $7xxrv.__name)(()=>{\n    $82eddb7c08573d49$var$sections = /* @__PURE__ */ new Map();\n    $82eddb7c08573d49$var$showData = $82eddb7c08573d49$var$DEFAULT_PIE_DB.showData;\n    (0, $7hgA6.clear)();\n}, \"clear\");\nvar $82eddb7c08573d49$var$addSection = /* @__PURE__ */ (0, $7xxrv.__name)(({ label: label, value: value })=>{\n    if (!$82eddb7c08573d49$var$sections.has(label)) {\n        $82eddb7c08573d49$var$sections.set(label, value);\n        (0, $7hgA6.log).debug(`added new section: ${label}, with value: ${value}`);\n    }\n}, \"addSection\");\nvar $82eddb7c08573d49$var$getSections = /* @__PURE__ */ (0, $7xxrv.__name)(()=>$82eddb7c08573d49$var$sections, \"getSections\");\nvar $82eddb7c08573d49$var$setShowData = /* @__PURE__ */ (0, $7xxrv.__name)((toggle)=>{\n    $82eddb7c08573d49$var$showData = toggle;\n}, \"setShowData\");\nvar $82eddb7c08573d49$var$getShowData = /* @__PURE__ */ (0, $7xxrv.__name)(()=>$82eddb7c08573d49$var$showData, \"getShowData\");\nvar $82eddb7c08573d49$var$db = {\n    getConfig: $82eddb7c08573d49$var$getConfig2,\n    clear: $82eddb7c08573d49$var$clear2,\n    setDiagramTitle: $7hgA6.setDiagramTitle,\n    getDiagramTitle: $7hgA6.getDiagramTitle,\n    setAccTitle: $7hgA6.setAccTitle,\n    getAccTitle: $7hgA6.getAccTitle,\n    setAccDescription: $7hgA6.setAccDescription,\n    getAccDescription: $7hgA6.getAccDescription,\n    addSection: $82eddb7c08573d49$var$addSection,\n    getSections: $82eddb7c08573d49$var$getSections,\n    setShowData: $82eddb7c08573d49$var$setShowData,\n    getShowData: $82eddb7c08573d49$var$getShowData\n};\n// src/diagrams/pie/pieParser.ts\nvar $82eddb7c08573d49$var$populateDb = /* @__PURE__ */ (0, $7xxrv.__name)((ast, db2)=>{\n    (0, $eIvOz.populateCommonDb)(ast, db2);\n    db2.setShowData(ast.showData);\n    ast.sections.map(db2.addSection);\n}, \"populateDb\");\nvar $82eddb7c08573d49$var$parser = {\n    parse: /* @__PURE__ */ (0, $7xxrv.__name)(async (input)=>{\n        const ast = await (0, $9nJgw.parse)(\"pie\", input);\n        (0, $7hgA6.log).debug(ast);\n        $82eddb7c08573d49$var$populateDb(ast, $82eddb7c08573d49$var$db);\n    }, \"parse\")\n};\n// src/diagrams/pie/pieStyles.ts\nvar $82eddb7c08573d49$var$getStyles = /* @__PURE__ */ (0, $7xxrv.__name)((options)=>`\n  .pieCircle{\n    stroke: ${options.pieStrokeColor};\n    stroke-width : ${options.pieStrokeWidth};\n    opacity : ${options.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${options.pieOuterStrokeColor};\n    stroke-width: ${options.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${options.pieTitleTextSize};\n    fill: ${options.pieTitleTextColor};\n    font-family: ${options.fontFamily};\n  }\n  .slice {\n    font-family: ${options.fontFamily};\n    fill: ${options.pieSectionTextColor};\n    font-size:${options.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${options.pieLegendTextColor};\n    font-family: ${options.fontFamily};\n    font-size: ${options.pieLegendTextSize};\n  }\n`, \"getStyles\");\nvar $82eddb7c08573d49$var$pieStyles_default = $82eddb7c08573d49$var$getStyles;\n// src/diagrams/pie/pieRenderer.ts\nvar $82eddb7c08573d49$var$createPieArcs = /* @__PURE__ */ (0, $7xxrv.__name)((sections2)=>{\n    const pieData = [\n        ...sections2.entries()\n    ].map((element)=>{\n        return {\n            label: element[0],\n            value: element[1]\n        };\n    }).sort((a, b)=>{\n        return b.value - a.value;\n    });\n    const pie = (0, $7hgA6.pie_default)().value((d3Section)=>d3Section.value);\n    return pie(pieData);\n}, \"createPieArcs\");\nvar $82eddb7c08573d49$var$draw = /* @__PURE__ */ (0, $7xxrv.__name)((text, id, _version, diagObj)=>{\n    (0, $7hgA6.log).debug(\"rendering pie chart\\n\" + text);\n    const db2 = diagObj.db;\n    const globalConfig = (0, $7hgA6.getConfig2)();\n    const pieConfig = (0, $fo0kP.cleanAndMerge)(db2.getConfig(), globalConfig.pie);\n    const MARGIN = 40;\n    const LEGEND_RECT_SIZE = 18;\n    const LEGEND_SPACING = 4;\n    const height = 450;\n    const pieWidth = height;\n    const svg = (0, $78zRz.selectSvgElement)(id);\n    const group = svg.append(\"g\");\n    group.attr(\"transform\", \"translate(\" + pieWidth / 2 + \",\" + height / 2 + \")\");\n    const { themeVariables: themeVariables } = globalConfig;\n    let [outerStrokeWidth] = (0, $fo0kP.parseFontSize)(themeVariables.pieOuterStrokeWidth);\n    outerStrokeWidth ??= 2;\n    const textPosition = pieConfig.textPosition;\n    const radius = Math.min(pieWidth, height) / 2 - MARGIN;\n    const arcGenerator = (0, $7hgA6.arc_default)().innerRadius(0).outerRadius(radius);\n    const labelArcGenerator = (0, $7hgA6.arc_default)().innerRadius(radius * textPosition).outerRadius(radius * textPosition);\n    group.append(\"circle\").attr(\"cx\", 0).attr(\"cy\", 0).attr(\"r\", radius + outerStrokeWidth / 2).attr(\"class\", \"pieOuterCircle\");\n    const sections2 = db2.getSections();\n    const arcs = $82eddb7c08573d49$var$createPieArcs(sections2);\n    const myGeneratedColors = [\n        themeVariables.pie1,\n        themeVariables.pie2,\n        themeVariables.pie3,\n        themeVariables.pie4,\n        themeVariables.pie5,\n        themeVariables.pie6,\n        themeVariables.pie7,\n        themeVariables.pie8,\n        themeVariables.pie9,\n        themeVariables.pie10,\n        themeVariables.pie11,\n        themeVariables.pie12\n    ];\n    const color = (0, $7hgA6.ordinal)(myGeneratedColors);\n    group.selectAll(\"mySlices\").data(arcs).enter().append(\"path\").attr(\"d\", arcGenerator).attr(\"fill\", (datum)=>{\n        return color(datum.data.label);\n    }).attr(\"class\", \"pieCircle\");\n    let sum = 0;\n    sections2.forEach((section)=>{\n        sum += section;\n    });\n    group.selectAll(\"mySlices\").data(arcs).enter().append(\"text\").text((datum)=>{\n        return (datum.data.value / sum * 100).toFixed(0) + \"%\";\n    }).attr(\"transform\", (datum)=>{\n        return \"translate(\" + labelArcGenerator.centroid(datum) + \")\";\n    }).style(\"text-anchor\", \"middle\").attr(\"class\", \"slice\");\n    group.append(\"text\").text(db2.getDiagramTitle()).attr(\"x\", 0).attr(\"y\", -(height - 50) / 2).attr(\"class\", \"pieTitleText\");\n    const legend = group.selectAll(\".legend\").data(color.domain()).enter().append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", (_datum, index)=>{\n        const height2 = LEGEND_RECT_SIZE + LEGEND_SPACING;\n        const offset = height2 * color.domain().length / 2;\n        const horizontal = 12 * LEGEND_RECT_SIZE;\n        const vertical = index * height2 - offset;\n        return \"translate(\" + horizontal + \",\" + vertical + \")\";\n    });\n    legend.append(\"rect\").attr(\"width\", LEGEND_RECT_SIZE).attr(\"height\", LEGEND_RECT_SIZE).style(\"fill\", color).style(\"stroke\", color);\n    legend.data(arcs).append(\"text\").attr(\"x\", LEGEND_RECT_SIZE + LEGEND_SPACING).attr(\"y\", LEGEND_RECT_SIZE - LEGEND_SPACING).text((datum)=>{\n        const { label: label, value: value } = datum.data;\n        if (db2.getShowData()) return `${label} [${value}]`;\n        return label;\n    });\n    const longestTextWidth = Math.max(...legend.selectAll(\"text\").nodes().map((node)=>node?.getBoundingClientRect().width ?? 0));\n    const totalWidth = pieWidth + MARGIN + LEGEND_RECT_SIZE + LEGEND_SPACING + longestTextWidth;\n    svg.attr(\"viewBox\", `0 0 ${totalWidth} ${height}`);\n    (0, $7hgA6.configureSvgSize)(svg, height, totalWidth, pieConfig.useMaxWidth);\n}, \"draw\");\nvar $82eddb7c08573d49$var$renderer = {\n    draw: $82eddb7c08573d49$var$draw\n};\n// src/diagrams/pie/pieDiagram.ts\nvar $82eddb7c08573d49$export$6118d022d940d562 = {\n    parser: $82eddb7c08573d49$var$parser,\n    db: $82eddb7c08573d49$var$db,\n    renderer: $82eddb7c08573d49$var$renderer,\n    styles: $82eddb7c08573d49$var$pieStyles_default\n};\n\n});\nparcelRegister(\"eIvOz\", function(module, exports) {\n\n$parcel$export(module.exports, \"populateCommonDb\", () => $81f57dd5a6cf2155$export$ca039920720611c5);\n\nvar $7xxrv = parcelRequire(\"7xxrv\");\n// src/diagrams/common/populateCommonDb.ts\nfunction $81f57dd5a6cf2155$export$ca039920720611c5(ast, db) {\n    if (ast.accDescr) db.setAccDescription?.(ast.accDescr);\n    if (ast.accTitle) db.setAccTitle?.(ast.accTitle);\n    if (ast.title) db.setDiagramTitle?.(ast.title);\n}\n(0, $7xxrv.__name)($81f57dd5a6cf2155$export$ca039920720611c5, \"populateCommonDb\");\n\n});\n\n\n\n//# sourceMappingURL=pieDiagram-R7PND6GI.46b42e39.js.map\n","import {\n  populateCommonDb\n} from \"./chunk-K2ZEYYM2.mjs\";\nimport {\n  parse\n} from \"./chunk-ZTYE4VVB.mjs\";\nimport \"./chunk-VUYTGWVG.mjs\";\nimport \"./chunk-FKTRZSYK.mjs\";\nimport \"./chunk-55U4IUQG.mjs\";\nimport {\n  selectSvgElement\n} from \"./chunk-XB7NGBBB.mjs\";\nimport {\n  cleanAndMerge,\n  parseFontSize\n} from \"./chunk-TVJ2DRIE.mjs\";\nimport \"./chunk-GKOISANM.mjs\";\nimport {\n  arc_default,\n  clear,\n  configureSvgSize,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig2 as getConfig,\n  getDiagramTitle,\n  log,\n  ordinal,\n  pie_default,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle\n} from \"./chunk-M7TDSP4I.mjs\";\nimport \"./chunk-5PULXXUT.mjs\";\nimport \"./chunk-ACX3ZYE2.mjs\";\nimport \"./chunk-46UCTVYF.mjs\";\nimport \"./chunk-TGZYFRKZ.mjs\";\nimport \"./chunk-GRZAG2UZ.mjs\";\nimport \"./chunk-HD3LK5B5.mjs\";\nimport {\n  __name\n} from \"./chunk-DLQEHMXD.mjs\";\n\n// src/diagrams/pie/pieDb.ts\nvar DEFAULT_PIE_CONFIG = defaultConfig_default.pie;\nvar DEFAULT_PIE_DB = {\n  sections: /* @__PURE__ */ new Map(),\n  showData: false,\n  config: DEFAULT_PIE_CONFIG\n};\nvar sections = DEFAULT_PIE_DB.sections;\nvar showData = DEFAULT_PIE_DB.showData;\nvar config = structuredClone(DEFAULT_PIE_CONFIG);\nvar getConfig2 = /* @__PURE__ */ __name(() => structuredClone(config), \"getConfig\");\nvar clear2 = /* @__PURE__ */ __name(() => {\n  sections = /* @__PURE__ */ new Map();\n  showData = DEFAULT_PIE_DB.showData;\n  clear();\n}, \"clear\");\nvar addSection = /* @__PURE__ */ __name(({ label, value }) => {\n  if (!sections.has(label)) {\n    sections.set(label, value);\n    log.debug(`added new section: ${label}, with value: ${value}`);\n  }\n}, \"addSection\");\nvar getSections = /* @__PURE__ */ __name(() => sections, \"getSections\");\nvar setShowData = /* @__PURE__ */ __name((toggle) => {\n  showData = toggle;\n}, \"setShowData\");\nvar getShowData = /* @__PURE__ */ __name(() => showData, \"getShowData\");\nvar db = {\n  getConfig: getConfig2,\n  clear: clear2,\n  setDiagramTitle,\n  getDiagramTitle,\n  setAccTitle,\n  getAccTitle,\n  setAccDescription,\n  getAccDescription,\n  addSection,\n  getSections,\n  setShowData,\n  getShowData\n};\n\n// src/diagrams/pie/pieParser.ts\nvar populateDb = /* @__PURE__ */ __name((ast, db2) => {\n  populateCommonDb(ast, db2);\n  db2.setShowData(ast.showData);\n  ast.sections.map(db2.addSection);\n}, \"populateDb\");\nvar parser = {\n  parse: /* @__PURE__ */ __name(async (input) => {\n    const ast = await parse(\"pie\", input);\n    log.debug(ast);\n    populateDb(ast, db);\n  }, \"parse\")\n};\n\n// src/diagrams/pie/pieStyles.ts\nvar getStyles = /* @__PURE__ */ __name((options) => `\n  .pieCircle{\n    stroke: ${options.pieStrokeColor};\n    stroke-width : ${options.pieStrokeWidth};\n    opacity : ${options.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${options.pieOuterStrokeColor};\n    stroke-width: ${options.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${options.pieTitleTextSize};\n    fill: ${options.pieTitleTextColor};\n    font-family: ${options.fontFamily};\n  }\n  .slice {\n    font-family: ${options.fontFamily};\n    fill: ${options.pieSectionTextColor};\n    font-size:${options.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${options.pieLegendTextColor};\n    font-family: ${options.fontFamily};\n    font-size: ${options.pieLegendTextSize};\n  }\n`, \"getStyles\");\nvar pieStyles_default = getStyles;\n\n// src/diagrams/pie/pieRenderer.ts\nvar createPieArcs = /* @__PURE__ */ __name((sections2) => {\n  const pieData = [...sections2.entries()].map((element) => {\n    return {\n      label: element[0],\n      value: element[1]\n    };\n  }).sort((a, b) => {\n    return b.value - a.value;\n  });\n  const pie = pie_default().value(\n    (d3Section) => d3Section.value\n  );\n  return pie(pieData);\n}, \"createPieArcs\");\nvar draw = /* @__PURE__ */ __name((text, id, _version, diagObj) => {\n  log.debug(\"rendering pie chart\\n\" + text);\n  const db2 = diagObj.db;\n  const globalConfig = getConfig();\n  const pieConfig = cleanAndMerge(db2.getConfig(), globalConfig.pie);\n  const MARGIN = 40;\n  const LEGEND_RECT_SIZE = 18;\n  const LEGEND_SPACING = 4;\n  const height = 450;\n  const pieWidth = height;\n  const svg = selectSvgElement(id);\n  const group = svg.append(\"g\");\n  group.attr(\"transform\", \"translate(\" + pieWidth / 2 + \",\" + height / 2 + \")\");\n  const { themeVariables } = globalConfig;\n  let [outerStrokeWidth] = parseFontSize(themeVariables.pieOuterStrokeWidth);\n  outerStrokeWidth ??= 2;\n  const textPosition = pieConfig.textPosition;\n  const radius = Math.min(pieWidth, height) / 2 - MARGIN;\n  const arcGenerator = arc_default().innerRadius(0).outerRadius(radius);\n  const labelArcGenerator = arc_default().innerRadius(radius * textPosition).outerRadius(radius * textPosition);\n  group.append(\"circle\").attr(\"cx\", 0).attr(\"cy\", 0).attr(\"r\", radius + outerStrokeWidth / 2).attr(\"class\", \"pieOuterCircle\");\n  const sections2 = db2.getSections();\n  const arcs = createPieArcs(sections2);\n  const myGeneratedColors = [\n    themeVariables.pie1,\n    themeVariables.pie2,\n    themeVariables.pie3,\n    themeVariables.pie4,\n    themeVariables.pie5,\n    themeVariables.pie6,\n    themeVariables.pie7,\n    themeVariables.pie8,\n    themeVariables.pie9,\n    themeVariables.pie10,\n    themeVariables.pie11,\n    themeVariables.pie12\n  ];\n  const color = ordinal(myGeneratedColors);\n  group.selectAll(\"mySlices\").data(arcs).enter().append(\"path\").attr(\"d\", arcGenerator).attr(\"fill\", (datum) => {\n    return color(datum.data.label);\n  }).attr(\"class\", \"pieCircle\");\n  let sum = 0;\n  sections2.forEach((section) => {\n    sum += section;\n  });\n  group.selectAll(\"mySlices\").data(arcs).enter().append(\"text\").text((datum) => {\n    return (datum.data.value / sum * 100).toFixed(0) + \"%\";\n  }).attr(\"transform\", (datum) => {\n    return \"translate(\" + labelArcGenerator.centroid(datum) + \")\";\n  }).style(\"text-anchor\", \"middle\").attr(\"class\", \"slice\");\n  group.append(\"text\").text(db2.getDiagramTitle()).attr(\"x\", 0).attr(\"y\", -(height - 50) / 2).attr(\"class\", \"pieTitleText\");\n  const legend = group.selectAll(\".legend\").data(color.domain()).enter().append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", (_datum, index) => {\n    const height2 = LEGEND_RECT_SIZE + LEGEND_SPACING;\n    const offset = height2 * color.domain().length / 2;\n    const horizontal = 12 * LEGEND_RECT_SIZE;\n    const vertical = index * height2 - offset;\n    return \"translate(\" + horizontal + \",\" + vertical + \")\";\n  });\n  legend.append(\"rect\").attr(\"width\", LEGEND_RECT_SIZE).attr(\"height\", LEGEND_RECT_SIZE).style(\"fill\", color).style(\"stroke\", color);\n  legend.data(arcs).append(\"text\").attr(\"x\", LEGEND_RECT_SIZE + LEGEND_SPACING).attr(\"y\", LEGEND_RECT_SIZE - LEGEND_SPACING).text((datum) => {\n    const { label, value } = datum.data;\n    if (db2.getShowData()) {\n      return `${label} [${value}]`;\n    }\n    return label;\n  });\n  const longestTextWidth = Math.max(\n    ...legend.selectAll(\"text\").nodes().map((node) => node?.getBoundingClientRect().width ?? 0)\n  );\n  const totalWidth = pieWidth + MARGIN + LEGEND_RECT_SIZE + LEGEND_SPACING + longestTextWidth;\n  svg.attr(\"viewBox\", `0 0 ${totalWidth} ${height}`);\n  configureSvgSize(svg, height, totalWidth, pieConfig.useMaxWidth);\n}, \"draw\");\nvar renderer = { draw };\n\n// src/diagrams/pie/pieDiagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer,\n  styles: pieStyles_default\n};\nexport {\n  diagram\n};\n","import {\n  __name\n} from \"./chunk-DLQEHMXD.mjs\";\n\n// src/diagrams/common/populateCommonDb.ts\nfunction populateCommonDb(ast, db) {\n  if (ast.accDescr) {\n    db.setAccDescription?.(ast.accDescr);\n  }\n  if (ast.accTitle) {\n    db.setAccTitle?.(ast.accTitle);\n  }\n  if (ast.title) {\n    db.setDiagramTitle?.(ast.title);\n  }\n}\n__name(populateCommonDb, \"populateCommonDb\");\n\nexport {\n  populateCommonDb\n};\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$82eddb7c08573d49$export$6118d022d940d562","$eIvOz","$9nJgw","$78zRz","$fo0kP","$7hgA6","$7xxrv","$82eddb7c08573d49$var$DEFAULT_PIE_CONFIG","defaultConfig_default","pie","$82eddb7c08573d49$var$DEFAULT_PIE_DB","sections","Map","showData","config","$82eddb7c08573d49$var$sections","$82eddb7c08573d49$var$showData","$82eddb7c08573d49$var$config","structuredClone","$82eddb7c08573d49$var$getConfig2","__name","$82eddb7c08573d49$var$clear2","clear","$82eddb7c08573d49$var$addSection","label","value","has","log","debug","$82eddb7c08573d49$var$getSections","$82eddb7c08573d49$var$setShowData","toggle","$82eddb7c08573d49$var$getShowData","$82eddb7c08573d49$var$db","getConfig","setDiagramTitle","getDiagramTitle","setAccTitle","getAccTitle","setAccDescription","getAccDescription","addSection","getSections","setShowData","getShowData","$82eddb7c08573d49$var$populateDb","ast","db2","populateCommonDb","map","$82eddb7c08573d49$var$parser","parse","input","$82eddb7c08573d49$var$getStyles","options","pieStrokeColor","pieStrokeWidth","pieOpacity","pieOuterStrokeColor","pieOuterStrokeWidth","pieTitleTextSize","pieTitleTextColor","fontFamily","pieSectionTextColor","pieSectionTextSize","pieLegendTextColor","pieLegendTextSize","$82eddb7c08573d49$var$createPieArcs","sections2","pieData","entries","element","sort","a","b","pie_default","d3Section","parser","db","renderer","draw","text","id","_version","diagObj","globalConfig","getConfig2","pieConfig","cleanAndMerge","svg","selectSvgElement","group","append","attr","themeVariables","outerStrokeWidth","parseFontSize","textPosition","arcGenerator","arc_default","innerRadius","outerRadius","Math","labelArcGenerator","radius","arcs","myGeneratedColors","pie1","pie2","pie3","pie4","pie5","pie6","pie7","pie8","pie9","pie10","pie11","pie12","color","ordinal","selectAll","data","enter","datum","sum","forEach","section","toFixed","centroid","style","legend","domain","_datum","index","LEGEND_RECT_SIZE","height2","length","totalWidth","pieWidth","max","nodes","node","getBoundingClientRect","width","configureSvgSize","useMaxWidth","styles","$81f57dd5a6cf2155$export$ca039920720611c5","accDescr","accTitle","title"],"version":3,"file":"pieDiagram-R7PND6GI.46b42e39.js.map"}